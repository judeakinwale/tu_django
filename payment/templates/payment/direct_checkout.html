{% extends 'base_slim.html' %}
{% load static %}
{% load cart_tag %}
{% load paystack %}


{% block content %}
<main>
  <div class="container my-5">
    <h4 class="text-purple mb-5 text-center font-weight-bold">Checkout</h4>
    <div class="row">

      <div class="col-md-8 px-5 pr-md-5">
        <h5 class="text-purple my-5 text-center font-weight-bold">My Cart</h5>
        <div class="row">
          {% for key,value in request.session.cart.items %}
          <div class="col mb-4">
            <div class="card border-0">
              <img src="{{value.image}}" class="card-img-top rounded" alt="...">
              <div class="card-body px-0">
                <h5 class="card-title my-1">{{value.name}}</h5>
                <p class="card-text text-purple my-1">N{{value.price}} <span
                    class="float-right font-weight-bold">x{{value.quantity}}</span> </p>
              </div>
            </div>
          </div>
          {% endfor %}
          <!-- <div class="col mb-4">
            <div class="card border-0">
              <img src="{% static 'core/img/new/img 4.jpeg' %}" class="card-img-top rounded" alt="...">
              <div class="card-body px-0">
                <h5 class="card-title my-1">Card title</h5>
                <p class="card-text text-purple my-1">N5000</p>
              </div>
            </div>
          </div>
          <div class="col mb-4">
            <div class="card border-0">
              <img src="{% static 'core/img/new/img 4.jpeg' %}" class="card-img-top rounded" alt="...">
              <div class="card-body px-0">
                <h5 class="card-title my-1">Card title</h5>
                <p class="card-text text-purple my-1">N5000</p>
              </div>
            </div>
          </div> -->
        </div>
        <a href="{% url 'core:cart_detail' %}" class="btn btn-outline-purple">Return to Cart</a>
      </div>
      <div class="col-md-4 pt-5 pt-md-0">

        <form action="{% url 'payment:checkout' %}" class="pt-5 pt-md-0">
          <!-- <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputEmail4">Email</label>
                <input type="email" class="form-control" id="inputEmail4">
              </div>
              <div class="form-group col-md-6">
                <label for="inputPassword4">Password</label>
                <input type="password" class="form-control" id="inputPassword4">
              </div>
            </div> -->
          <div class="form-group rounded-lg shadow py-2">
            <label for="inputAddress" class="px-3">Email</label>

            {% if request.user.is_authenticated %}
            <input type="text" class="form-control form-control-sm pl-3 border-0 " id="inputAddress"
              value="{{request.user.email}}">
            {% else %}
            <input type="text" class="form-control form-control-sm pl-3 border-0 " id="inputAddress"
              placeholder="user@example.com">
            {% endif %}

          </div>
          <div class="form-group rounded-lg shadow py-2">
            <label for="inputAddress" class="px-3">Ticket Information</label>
            <div class="input-group mb-2 border-bottom">
              <div class="input-group-prepend">
                <span class="input-group-text bg-white border-0 id=" basic-addon"><img
                    src="{% static 'core/img/new/img 3.png' %}" alt="" class="img-fluid" height="32px"></span>
              </div>

              {% if request.user.is_authenticated %}
              <input type="text" class="form-control form-control-sm pl-3 my-2 border-0 rounded-0 bg-white text-center"
                id="inputAddress" value="{{request.user.first_name}} {{request.user.last_name}}">
              {% else %}
              <input type="text" class="form-control form-control-sm pl-3 my-2 border-0 rounded-0 bg-white text-center"
                id="inputAddress" placeholder="Please enter your name">
              {% endif %}

              <!-- <input type="text" class="form-control form-control-sm pl-3 my-2 border-0 bg-white text-center"
                id="inputAddress" placeholder="Sharon Obasi" disabled> -->
            </div>

            {% for key, value in request.session.cart.items %}
            <h6 class="text-center">{{value.name}}</h6>
            <div class="input-group mb-2">
              <div class="input-group-prepend">
                <span class="input-group-text bg-white border-0 id=" basic-addon"><img
                    src="{% static 'core/img/new/location.jpeg' %}" alt="" class="" height="28px"></span>
              </div>
              <input type="text" class="form-control form-control-sm pl-3 my-2 border-0 bg-white" id="inputAddress"
                placeholder="{{value.location}}, {{value.city}}" disabled>
            </div>
            <div class="input-group mb-2">
              <div class="input-group-prepend">
                <span class="input-group-text bg-white border-0 id=" basic-addon"><img
                    src="{% static 'core/img/new/stopwatch.jpeg' %}" alt="" class="" height="28px"></span>
              </div>
              <span>{{value.start_time}}</span>
              <input type="text" class="form-control form-control-sm pl-3 my-2 border-0 bg-white" id="inputAddress"
                placeholder="{{value.date}} ({{value.time}})" disabled>
            </div>

            {% if not forloop.last %}
            <hr>
            {% endif %}

            {% endfor %}
            <!-- <input type="text" class="form-control form-control-sm pl-3 my-2 border-0 bg-white" id="inputAddress" placeholder="Sharon Obasi" disabled>
              <input type="text" class="form-control form-control-sm pl-3 my-2 border-0 bg-white" id="inputAddress" placeholder="7, Aletuji Close, Lekki Phase One" disabled>
              <input type="text" class="form-control form-control-sm pl-3 my-2 border-0 bg-white" id="inputAddress" placeholder="September 12 (22:00)" disabled> -->
          </div>
          <!-- <div class="form-group rounded-lg shadow py-2">
            <label for="inputAddress" class="px-3">Payment </label>
            <div class="input-group mb-2">
              <div class="input-group-prepend">
                <span class="input-group-text bg-white border-0 id=" basic-addon"><img src="{% static 'core/img/new/card.jpeg' %}" alt=""
                    class="" height="28px"></span>
              </div>
              <input type="text" class="form-control form-control-sm pl-3 border-0 " id="inputAddress"
                placeholder="4242 4242 4242 4242">
            </div>
          </div> -->
          <div class="form-group rounded-lg shadow py-2">
            <h6 class="px-3 my-2  ">Total: <a class="float-right">â‚¦{{cart_total_amount}}</a></h6>
          </div>
          <button type="submit" class="btn btn-lg btn-purple float-right my-5 w-50">Confirm</button>
          {% paystack_button amount=total email=email %}
        </form>
      </div>
    </div>
  </div>
</main>
{% endblock content %}